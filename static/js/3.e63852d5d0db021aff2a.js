webpackJsonp([3],{l47c:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{form:{grossSalary:2e3,insurancesPrice:0,specialDeduction:0,threshold:5e3,dataList:[]},rules:{grossSalary:[{required:!0,message:"必填项",trigger:"change"},{type:"number",message:"必须为数字值",trigger:"change"}],insurancesPrice:[{required:!0,message:"必填项",trigger:"change"},{type:"number",message:"必须为数字值",trigger:"change"}],specialDeduction:[{required:!0,message:"必填项",trigger:"change"},{type:"number",message:"必须为数字值",trigger:"change"}]}}},methods:{build:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.form.dataList=[];for(var r=1;r<=12;r++)e.perform()}})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(t){if(12===e.form.dataList.length)return void e.$message({message:"不能超过12条记录",type:"warning"});e.perform()}})},perform:function(){var e=this.form.dataList.length;if(0===e){var t=this.form.insurancesPrice+this.form.specialDeduction+this.form.threshold,r=this.form.grossSalary-t,a=r>0?r:0,s=r>0?this.calculationTax(a):0;this.form.dataList.push({index:"1月份",grossSalary:this.form.grossSalary,insurancesPrice:this.form.insurancesPrice,specialDeduction:this.form.specialDeduction,threshold:this.form.threshold,taxAmount:a,tax:s>0?s:0,afterTax:this.form.grossSalary-this.form.insurancesPrice-s})}else{var o=this.getValueTotal("grossSalary",this.form.grossSalary)-(this.getValueTotal("insurancesPrice",this.form.insurancesPrice)+this.getValueTotal("specialDeduction",this.form.specialDeduction)+this.getValueTotal("threshold",this.form.threshold)),i=o>0?o:0,n=(o>0?this.calculationTax(i):0)-this.getValueTotal("tax");this.form.dataList.push({index:e+1+"月份",grossSalary:this.form.grossSalary,insurancesPrice:this.form.insurancesPrice,specialDeduction:this.form.specialDeduction,threshold:this.form.threshold,taxAmount:i,tax:n>0?n:0,afterTax:this.form.grossSalary-this.form.insurancesPrice-n})}},calculationTax:function(e){switch(!0){case e>=36e3&&e<144e3:return.1*e-2520;case e>=144e3&&e<3e5:return.2*e-16920;case e>=3e5&&e<42e4:return.25*e-31920;case e>=42e4&&e<66e4:return.25*e-52920;case e>=66e4&&e<96e4:return.35*e-85920;case e>=96e4:return.45*e-181920;default:return.03*e}},getValueTotal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;return this.form.dataList.forEach(function(t){r+=t[e]}),r+t},resetFormData:function(e){this.form.dataList=[]},getSummaries:function(e){var t=e.columns,r=e.data,a=[];return t.forEach(function(e,t){if(0!==t){var s=r.map(function(t){return Number(t[e.property])});s.every(function(e){return isNaN(e)})?a[t]="--":(a[t]=s.reduce(function(e,t){var r=Number(t);return isNaN(r)?e:e+t},0),a[t]=a[t].toFixed(2),a[t]+=" 元")}else a[t]="总计"}),a}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"税前工资",prop:"grossSalary"}},[r("el-input",{attrs:{maxlength:"12"},model:{value:e.form.grossSalary,callback:function(t){e.$set(e.form,"grossSalary",e._n(t))},expression:"form.grossSalary"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"五险一金",prop:"insurancesPrice"}},[r("el-input",{attrs:{maxlength:"10"},model:{value:e.form.insurancesPrice,callback:function(t){e.$set(e.form,"insurancesPrice",e._n(t))},expression:"form.insurancesPrice"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"专项扣除",prop:"specialDeduction"}},[r("el-input",{attrs:{maxlength:"10"},model:{value:e.form.specialDeduction,callback:function(t){e.$set(e.form,"specialDeduction",e._n(t))},expression:"form.specialDeduction"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"起征点"}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.threshold,callback:function(t){e.$set(e.form,"threshold",e._n(t))},expression:"form.threshold"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.build}},[e._v("一键生成")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),e._v(" "),r("el-button",{on:{click:e.resetFormData}},[e._v("重置")])],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:16}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.dataList,border:"","summary-method":e.getSummaries,"show-summary":""}},[r("el-table-column",{attrs:{prop:"index",label:"月份"}}),e._v(" "),r("el-table-column",{attrs:{label:"税前工资",prop:"grossSalary"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.grossSalary.toFixed(2))+"元")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"五险一金",prop:"insurancesPrice"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.insurancesPrice.toFixed(2))+"元")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"专项扣除",prop:"specialDeduction"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.specialDeduction.toFixed(2))+"元")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"最终个税",prop:"tax"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.tax.toFixed(2))+"元")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"税后工资",prop:"afterTax"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.afterTax.toFixed(2))+"元")]}}])})],1)],1)],1)},staticRenderFns:[]},o=r("VU/8")(a,s,!1,null,null,null);t.default=o.exports}});